<div class="animate-fade-in-down bg-white p-8 rounded-2xl shadow-lg">
  <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6">
    <div>
        <h2 class="text-2xl font-bold text-slate-800">Resumo de Notas</h2>
        <p class="text-slate-500">Seu desempenho geral e notas detalhadas para este curso.</p>
    </div>
    @if (averageGrade() !== null) {
        <div class="text-center sm:text-right bg-indigo-50 p-4 rounded-lg">
            <p class="text-sm font-medium text-indigo-700">Média Geral no Curso</p>
            <p class="text-4xl font-bold text-indigo-600">{{ averageGrade() }}%</p>
        </div>
    }
  </div>

  @if (gradeItems().length > 0) {
    <div class="overflow-hidden border border-slate-200 rounded-lg">
      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left text-slate-500">
          <thead class="text-xs text-slate-700 uppercase bg-slate-50">
            <tr>
              <th scope="col" class="px-6 py-3">Avaliação</th>
              <th scope="col" class="px-6 py-3">Tipo</th>
              <th scope="col" class="px-6 py-3 text-center">Nota</th>
            </tr>
          </thead>
          <tbody>
            @for (item of gradeItems(); track item.type + (item.type === 'quiz' ? item.data.quizId : item.data.id)) {
              <tr class="bg-white border-b hover:bg-slate-50 last:border-b-0">
                <th scope="row" class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">
                  {{ item.type === 'quiz' ? item.data.quizTitle : item.data.title }}
                </th>
                <td class="px-6 py-4">
                  @if (item.type === 'quiz') {
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                      Prova Automática
                    </span>
                  } @else {
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                      Nota Manual
                    </span>
                  }
                </td>
                <td class="px-6 py-4 text-center">
                  <span 
                    class="font-bold text-lg"
                    [class.text-green-600]="item.data.score >= 85"
                    [class.text-yellow-600]="item.data.score >= 70 && item.data.score < 85"
                    [class.text-red-600]="item.data.score < 70"
                  >{{ item.data.score }}%</span>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  } @else {
    <div class="text-center py-16 px-6 bg-slate-50 rounded-lg">
       <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
         <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.781a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
       </svg>
      <h3 class="mt-2 text-xl font-semibold text-slate-900">Nenhuma nota registrada</h3>
      <p class="mt-1 text-sm text-slate-500">Suas notas aparecerão aqui após concluir as avaliações.</p>
    </div>
  }
</div>
