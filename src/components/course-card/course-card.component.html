<div 
  class="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 flex flex-col h-full transform hover:-translate-y-1 relative"
  [class.cursor-pointer]="role() === 'teacher' || isEnrolled()"
  (click)="onCardClick()">
  
  @if(role() === 'teacher' && course().status === 'inactive') {
    <div class="absolute top-3 right-3 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full z-10 shadow">
      INATIVO
    </div>
    <div class="absolute inset-0 bg-white/50 z-0"></div>
  }

  <img [ngSrc]="course().imageUrl" [alt]="course().title" width="600" height="400" class="w-full h-48 object-cover" [class.grayscale]="role() === 'teacher' && course().status === 'inactive'" [priority]="priority()"/>
  
  <div class="p-6 flex flex-col flex-grow">
    <h3 class="text-xl font-bold text-slate-900 mb-2">{{ course().title }}</h3>
    <p class="text-sm font-medium text-indigo-600 mb-4">Por {{ course().instructor }}</p>
    <p class="text-slate-600 text-sm flex-grow">{{ course().description }}</p>

    <div class="mt-6">
      @if (role() === 'student') {
        <button 
          (click)="onViewClick($event)"
          class="w-full bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 transform hover:-translate-y-0.5 active:scale-95">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
              <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
            </svg>
            <span>Ver Curso</span>
        </button>
      } @else {
        <div class="text-sm text-center text-indigo-600 font-semibold py-2 px-4 rounded-lg bg-indigo-50 flex items-center justify-center gap-2">
           <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
            <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />
          </svg>
          <span>Gerenciar Curso</span>
        </div>
      }
    </div>
  </div>
</div>
